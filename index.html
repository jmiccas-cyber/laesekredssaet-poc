<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <title>Læsekredssæt – v3.0 POC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0f1115; --card:#171923; --muted:#a0aec0; --fg:#e2e8f0; --pri:#3b82f6; --ok:#10b981; --err:#ef4444; --bord:#2d3748 }
    html,body { background:var(--bg); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial; margin:0; }
    header { padding:16px 20px; border-bottom:1px solid var(--bord); display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    h1 { font-size:18px; margin:0 16px 0 0 }
    .tabs { display:flex; gap:8px; }
    .btn-tab { background:#11131a; color:var(--fg); border:1px solid var(--bord); padding:8px 12px; border-radius:8px; cursor:pointer }
    .btn-tab.active { background:var(--pri); border-color:var(--pri) }
    main { padding:16px 20px; display:grid; gap:16px }
    .grid { display:grid; gap:12px }
    .card { background:var(--card); border:1px solid var(--bord); border-radius:12px; padding:14px }
    .muted { color:var(--muted) }
    label { display:block; font-size:12px; color:var(--muted); margin-bottom:6px }
    input, select, textarea, button { font:inherit }
    input[type="text"], input[type="date"], input[type="email"], input[type="tel"], input[type="number"], select, textarea {
      width:100%; background:#11131a; color:var(--fg); border:1px solid var(--bord); border-radius:8px; padding:8px
    }
    textarea { min-height:84px; }
    .row { display:flex; gap:12px; flex-wrap:wrap }
    .row > * { flex:1 1 220px }
    .actions { display:flex; gap:8px; flex-wrap:wrap }
    .primary { background:var(--pri); color:#fff; border:none; border-radius:8px; padding:8px 12px; cursor:pointer }
    .ghost { background:transparent; color:var(--fg); border:1px solid var(--bord); border-radius:8px; padding:8px 12px; cursor:pointer }
    .ok { background:#0b2; color:#fff }
    .err { background:#310; color:#fff }
    .hidden { display:none }
    table { width:100%; border-collapse:collapse; }
    th, td { border-bottom:1px solid var(--bord); padding:8px 6px; text-align:left; vertical-align:top }
    th { color:#cbd5e1; font-weight:600; }
    .two-col { display:grid; grid-template-columns:1fr 1fr; gap:12px }
    @media (max-width:900px){ .two-col { grid-template-columns:1fr } }
    .tabsline { display:flex; gap:8px; margin-bottom:10px; flex-wrap:wrap }
    .status { display:none; padding:10px 12px; border-radius:10px }
  </style>
</head>
<body>

<header>
  <h1>Læsekredssæt – v3.0</h1>
  <div class="tabs">
    <button id="toggleBooker" class="btn-tab active" type="button">Booker</button>
    <button id="toggleAdmin" class="btn-tab" type="button">Admin</button>
  </div>
</header>

<main>
  <div id="statusBox" class="status card"></div>

  <!-- BOOKER -->
  <section id="bookerSection" class="grid">
    <div class="card">
      <h2 style="margin-top:0">Søg & Book</h2>
      <div class="row">
        <div>
          <label>Login som bibliotek (simuleret)</label>
          <select id="loginAsSelect"></select>
        </div>
        <div>
          <label>Centralbibliotek (vælg 0–6; tom = alle)</label>
          <select id="centralSelect" multiple size="6"></select>
        </div>
        <div>
          <label>Titel/Forfatter/ISBN/FAUST</label>
          <input id="q" type="text" placeholder="fx 'Hemingway' eller 978…">
        </div>
        <div>
          <label>Startdato</label>
          <input id="startDate" type="date">
        </div>
        <div>
          <label>Slutdato</label>
          <input id="endDate" type="date">
        </div>
      </div>
      <div class="actions" style="margin-top:10px">
        <button id="searchBtn" class="primary" type="button">Søg</button>
        <button id="clearBtn" class="ghost" type="button">Ryd</button>
        <span class="muted">Tip: Ingen tekst og ingen datoer ⇒ vis alle sæt for valgte centraler (eller alle).</span>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-top:0">Resultater</h3>
      <div id="bookerResults" class="grid"></div>
    </div>

    <div class="card">
      <h3 style="margin-top:0">Min profil (for valgt login-bibliotek)</h3>
      <form id="profileForm" class="two-col"></form>
      <div class="actions" style="margin-top:10px">
        <button id="saveProfile" class="primary" type="button">Gem profil</button>
      </div>
    </div>
  </section>

  <!-- ADMIN -->
  <section id="adminSection" class="grid hidden">
    <div class="card">
      <div class="row">
        <div>
          <label>Jeg administrerer for centralbibliotek</label>
          <select id="adminOwner"></select>
        </div>
        <div class="actions" style="align-items:flex-end">
          <button id="loadAdminData" class="primary" type="button">Hent data</button>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="tabsline">
        <button id="tabBtnRegion" class="btn-tab active" type="button">Region – tilknyttede biblioteker</button>
        <button id="tabBtnSets" class="btn-tab" type="button">Sæt – vedligehold</button>
        <button id="tabBtnCopies" class="btn-tab" type="button">Eksemplarer (beholdning)</button>
      </div>

      <!-- REGION -->
      <div id="tabRegion" class="grid">
        <div class="row">
          <div>
            <label>Tilføj bibliotek til region (bibliotek_id)</label>
            <input id="newRegionalId" type="text" placeholder="fx GENT-L12">
          </div>
          <div class="actions" style="align-items:flex-end">
            <button id="addRegional" class="primary" type="button">Tilføj relation</button>
          </div>
        </div>
        <div id="regionalsTable"></div>
      </div>

      <!-- SÆT -->
      <div id="tabSets" class="grid hidden">
        <div class="row">
          <div><label>Titel</label><input id="newTitle" type="text"></div>
          <div><label>Forfatter</label><input id="newAuthor" type="text"></div>
          <div><label>ISBN</label><input id="newISBN" type="text"></div>
          <div><label>FAUST</label><input id="newFAUST" type="text"></div>
          <div>
            <label>Synlighed</label>
            <select id="newVisibility">
              <option value="national">national</option>
              <option value="regional">regional</option>
            </select>
          </div>
          <div><label>Låneuger</label><input id="newLoanWeeks" type="number" min="1" value="8"></div>
          <div><label>Bufferdage</label><input id="newBufferDays" type="number" min="0" value="0"></div>
        </div>
        <div class="actions">
          <button id="createSet" class="primary" type="button">Opret sæt</button>
          <button id="refreshSets" class="ghost" type="button">Opdater liste</button>
        </div>
        <div id="setsTable"></div>
      </div>

      <!-- EKSEMPLARER -->
      <div id="tabCopies" class="grid hidden">
        <div class="row">
          <div>
            <label>Vælg sæt</label>
            <select id="copiesSetSelect"></select>
          </div>
          <div class="actions" style="align-items:flex-end">
            <button id="loadCopies" class="primary" type="button">Hent eksemplarer</button>
          </div>
        </div>

        <div class="row">
          <div><label>Ny stregkode</label><input id="newCopyBarcode" type="text" placeholder="Scan/indtast"></div>
          <div class="actions" style="align-items:flex-end">
            <button id="addCopy" class="ghost" type="button">Tilføj eksemplar</button>
          </div>
        </div>

        <div id="copiesTable"></div>

        <div class="actions" style="margin-top:10px">
          <button id="reportBookedButLoaned" class="ghost" type="button">Bookede men stadig udlånte (næste 30 dage)</button>
        </div>
        <div id="reportArea"></div>
      </div>
    </div>
  </section>
</main>

<script type="module" src="./script.js"></script>
</body>
</html>
